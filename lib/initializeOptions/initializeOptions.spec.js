"use strict";var _expect=_interopRequireDefault(require("expect")),_lodash=_interopRequireDefault(require("lodash.merge")),_proxyquire=_interopRequireDefault(require("proxyquire")),_constants=require("../util/constants");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}_proxyquire["default"].noCallThru();var jPlayerInitializeOptions=_expect["default"].createSpy(),proxy=(0,_proxyquire["default"])("./initializeOptions",{"@appigram/react-jplayer":{initializeOptions:jPlayerInitializeOptions}}),initializeOptions=proxy["default"],initialState=proxy.initialState;describe("initializeOptions",function(){var a,b;beforeEach(function(){a={id:"TestPlayer"},b={hidePlaylist:!0}}),it("sets up initial jPlaylist options correctly",function(){initializeOptions(a,b),(0,_expect["default"])(initialState).toEqual(_defineProperty({},a.id,(0,_lodash["default"])({},_constants.defaultStatus,_constants.defaultOptions,b)))}),describe("react-jplayers initializeOptions",function(){it("is passed correct jPlayerOptions when playlist is not specified",function(){initializeOptions(a,b),(0,_expect["default"])(jPlayerInitializeOptions).toHaveBeenCalledWith(a)}),it("is passed correct jPlayerOptions when playlist is specified",function(){b.playlist=[{id:0,sources:{m4a:"http://jplayer.org/audio/m4a/Miaow-07-Bubble.m4a"}}],initializeOptions(a,b);var c=_slicedToArray(b.playlist,1),d=c[0];a.media=d,(0,_expect["default"])(jPlayerInitializeOptions).toHaveBeenCalledWith(a)})}),afterEach(function(){jPlayerInitializeOptions.reset()})});